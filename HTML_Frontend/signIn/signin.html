<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Sign In</title>
  <style>
    /* Minimal styling similar to signup */
    body { font-family: Arial, sans-serif; background:#f4f4f4; display:flex; align-items:center; justify-content:center; height:100vh; margin:0; }
    .container { background:#fff; padding:20px; border-radius:6px; width:320px; box-shadow:0 0 12px rgba(0,0,0,.08); }
    input{width:100%;padding:8px;margin-top:6px;box-sizing:border-box;border:1px solid #ccc;border-radius:4px}
    button{width:100%;padding:10px;margin-top:12px;background:#5cb85c;color:#fff;border:none;border-radius:4px;cursor:pointer}
    .error{color:#c00;font-size:.9em}
    #message{margin-top:12px;text-align:center}
  </style>
</head>
<body>
  <div class="container">
    <h2>Sign In</h2>
    <form id="signinForm">
      <label for="email">Email</label>
      <input id="email" name="email" type="email" required />

      <label for="password">Password</label>
      <input id="password" name="password" type="password" required />

      <button type="submit">Sign In</button>
    </form>
    <p id="message"></p>
  </div>

  <script>
    document.getElementById('signinForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const email = document.getElementById('email').value.trim();
      const password = document.getElementById('password').value;
      const message = document.getElementById('message');

      try {
        const res = await fetch('/signin', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email, password })
        });

        const data = await res.json().catch(() => ({ success: false, message: 'Invalid server response' }));

        if (!res.ok || !data.success) {
          message.style.color = 'red';
          message.textContent = data.message || 'Signin failed';
        } else {
          message.style.color = 'green';
          message.textContent = data.message || 'Signin successful';
          setTimeout(() => { window.location.href = '../index.html'; }, 700);
        }
      } catch (err) {
        console.error('Signin fetch error', err);
        message.style.color = 'red';
        message.textContent = 'Network error during signin.';
      }
    });
  </script>
</body>
</html>